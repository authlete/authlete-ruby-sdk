# Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

# typed: true
# frozen_string_literal: true


module Authlete
  module Models
    module Components
    

      class AuthorizationIssueRequest
        extend T::Sig
        include Crystalline::MetadataFields

        # The ticket issued from Authlete `/auth/authorization` API.
        # 
        field :ticket, ::String, { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('ticket'), required: true }, 'form': { 'field_name': 'ticket' } }
        # The subject (= a user account managed by the service) who has granted authorization to the client application.
        # 
        field :subject, ::String, { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('subject'), required: true }, 'form': { 'field_name': 'subject' } }
        # The time when the authentication of the end-user occurred. Its value is the number of seconds from `1970-01-01`.
        # 
        field :auth_time, Crystalline::Nilable.new(::Integer), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('authTime') }, 'form': { 'field_name': 'authTime' } }
        # The Authentication Context Class Reference performed for the end-user authentication.
        field :acr, Crystalline::Nilable.new(::String), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('acr') }, 'form': { 'field_name': 'acr' } }
        # The claims of the end-user (= pieces of information about the end-user) in JSON format.
        # See [OpenID Connect Core 1.0, 5.1. Standard Claims](https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims) for details about the format.
        # 
        field :claims, Crystalline::Nilable.new(::String), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('claims') }, 'form': { 'field_name': 'claims' } }
        # Extra properties to associate with an access token and/or an authorization code.
        field :properties, Crystalline::Nilable.new(Crystalline::Array.new(Models::Components::Property)), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('properties') }, 'form': { 'field_name': 'properties', 'json': true } }
        # Scopes to associate with an access token and/or an authorization code.
        # If a non-empty string array is given, it replaces the scopes specified by the original authorization request.
        # 
        field :scopes, Crystalline::Nilable.new(Crystalline::Array.new(::String)), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('scopes') }, 'form': { 'field_name': 'scopes' } }
        # The value of the `sub` claim to embed in an ID token. If this request parameter is `null` or empty,
        # the value of the `subject` request parameter is used as the value of the `sub` claim.
        # 
        field :sub, Crystalline::Nilable.new(::String), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('sub') }, 'form': { 'field_name': 'sub' } }
        # JSON that represents additional JWS header parameters for ID tokens that may be issued based on
        # the authorization request.
        # 
        field :idt_header_params, Crystalline::Nilable.new(::String), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('idtHeaderParams') }, 'form': { 'field_name': 'idtHeaderParams' } }
        # Claim key-value pairs that are used to compute transformed claims.
        # 
        field :claims_for_tx, Crystalline::Nilable.new(::String), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('claimsForTx') }, 'form': { 'field_name': 'claimsForTx' } }
        # the claims that the user has consented for the client application
        # to know.
        # 
        field :consented_claims, Crystalline::Nilable.new(Crystalline::Array.new(::String)), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('consentedClaims') }, 'form': { 'field_name': 'consentedClaims' } }
        # The authorization details. This represents the value of the `authorization_details`
        # request parameter in the preceding device authorization request which is defined in
        # "OAuth 2.0 Rich Authorization Requests".
        # 
        field :authorization_details, Crystalline::Nilable.new(Models::Components::AuthzDetails), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('authorizationDetails') }, 'form': { 'field_name': 'authorizationDetails', 'json': true } }
        # Additional claims that are added to the payload part of the JWT access token.
        # 
        field :jwt_at_claims, Crystalline::Nilable.new(::String), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('jwtAtClaims') }, 'form': { 'field_name': 'jwtAtClaims' } }
        # The representation of an access token that may be issued as a result of the Authlete API call.
        # 
        field :access_token, Crystalline::Nilable.new(::String), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('accessToken') }, 'form': { 'field_name': 'accessToken' } }
        # The duration (in seconds) of the access token that may be issued as a result of the Authlete
        # API call.
        # 
        # When this request parameter holds a positive integer, it is used as the duration of the access
        # token in. In other cases, this request parameter is ignored.
        # 
        field :access_token_duration, Crystalline::Nilable.new(::Integer), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('accessTokenDuration') }, 'form': { 'field_name': 'accessTokenDuration' } }
        # The session ID of the user's authentication session. The specified value will be embedded in the
        # ID token as the value of the `sid` claim. This parameter needs to be provided only if you want
        # to support the [OpenID Connect Native SSO for Mobile Apps 1.0](https://openid.net/specs/openid-connect-native-sso-1_0.html)
        # specification (a.k.a. "Native SSO"). To enable support for the Native SSO specification, the
        # `nativeSsoSupported` property of your service must be set to `true`.
        # 
        # NOTE: When the response from the `/auth/authorization` API contains the `nativeSsoRequested`
        # property with a value of `true`, the `sessionId` request parameter must be provided to the
        # `/auth/authorization/issue` API.
        # 
        field :session_id, Crystalline::Nilable.new(::String), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('sessionId') }, 'form': { 'field_name': 'sessionId' } }
        # The type of the `aud` claim of the ID token being issued. Valid values are as follows.
        # 
        # | Value | Description |
        # | ----- | ----------- |
        # | "array" | The type of the aud claim is always an array of strings. |
        # | "string" | The type of the aud claim is always a single string. |
        # | null | The type of the aud claim remains the same as before. |
        # 
        # This request parameter takes precedence over the `idTokenAudType` property of the service.
        # 
        field :id_token_aud_type, Crystalline::Nilable.new(::String), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('idTokenAudType') }, 'form': { 'field_name': 'idTokenAudType' } }
        # Values of verified claims requested indirectly by "transformed claims".
        # 
        # A client application may request "transformed claims". Each of transformed claims uses an existing
        # claim as input. As a result, to compute the value of a transformed claim, the value of the referenced
        # existing claim is needed. This `verifiedClaimsForTx` request parameter has to be used to provide
        # values of existing claims for computation of transformed claims.
        # 
        # A response from the `/auth/authorization` API may include the `requestedVerifiedClaimsForTx` response
        # parameter which is a list of verified claims that are referenced indirectly by transformed claims
        # (cf. `requestedVerifiedClaimsForTx` in `/auth/authorization` API response). The authorization
        # server implementation should prepare values of the verified claims listed in `requestedVerifiedClaimsForTx`
        # and pass them as the value of this `verifiedClaimsForTx` request parameter.
        # 
        # The following is an example of the value of this request parameter.
        # 
        # ```
        # [
        #   "{\"birthdate\":\"1970-01-23\",\"nationalities\":[\"DEU\",\"USA\"]}"
        # ]
        # ```
        # 
        # The reason that this `verifiedClaimsForTx` property is an array is that the `"verified_claims"`
        # property in the claims request parameter of an authorization request can be an array like below.
        # 
        # ```
        # {
        #   "transformed_claims": {
        #     "nationality_usa": {
        #       "claim": "nationalities",
        #       "fn": [
        #         [ "eq", "USA" ],
        #         "any"
        #       ]
        #     }
        #   },
        #   "id_token": {
        #     "verified_claims": [
        #       {
        #         "verification": { "trust_framework": { "value": "gold" } },
        #         "claims": { "::18_or_above": null }
        #       },
        #       {
        #         "verification": { "trust_framework": { "value": "silver" } },
        #         "claims": { ":nationality_usa": null }
        #       }
        #     ]
        #   }
        # }
        # ```
        # 
        # For the example above, the value of this `verifiedClaimsForTx` property should be an array of
        # size 2 and look like below. The first element is JSON including claims which have been verified
        # under the trust framework `"gold"`, and the second element is JSON including claims which have
        # been verified under the trust framework `"silver"`.
        # 
        # ```
        # [
        #   "{\"birthdate\":\"1970-01-23\"}",
        #   "{\"nationalities\":[\"DEU\",\"USA\"]}"
        # ]
        # ```
        # 
        field :verified_claims_for_tx, Crystalline::Nilable.new(Crystalline::Array.new(::String)), { 'format_json': { 'letter_case': ::Authlete::Utils.field_name('verifiedClaimsForTx') }, 'form': { 'field_name': 'verifiedClaimsForTx' } }

        sig { params(ticket: ::String, subject: ::String, auth_time: T.nilable(::Integer), acr: T.nilable(::String), claims: T.nilable(::String), properties: T.nilable(T::Array[Models::Components::Property]), scopes: T.nilable(T::Array[::String]), sub: T.nilable(::String), idt_header_params: T.nilable(::String), claims_for_tx: T.nilable(::String), consented_claims: T.nilable(T::Array[::String]), authorization_details: T.nilable(Models::Components::AuthzDetails), jwt_at_claims: T.nilable(::String), access_token: T.nilable(::String), access_token_duration: T.nilable(::Integer), session_id: T.nilable(::String), id_token_aud_type: T.nilable(::String), verified_claims_for_tx: T.nilable(T::Array[::String])).void }
        def initialize(ticket:, subject:, auth_time: nil, acr: nil, claims: nil, properties: nil, scopes: nil, sub: nil, idt_header_params: nil, claims_for_tx: nil, consented_claims: nil, authorization_details: nil, jwt_at_claims: nil, access_token: nil, access_token_duration: nil, session_id: nil, id_token_aud_type: nil, verified_claims_for_tx: nil)
          @ticket = ticket
          @subject = subject
          @auth_time = auth_time
          @acr = acr
          @claims = claims
          @properties = properties
          @scopes = scopes
          @sub = sub
          @idt_header_params = idt_header_params
          @claims_for_tx = claims_for_tx
          @consented_claims = consented_claims
          @authorization_details = authorization_details
          @jwt_at_claims = jwt_at_claims
          @access_token = access_token
          @access_token_duration = access_token_duration
          @session_id = session_id
          @id_token_aud_type = id_token_aud_type
          @verified_claims_for_tx = verified_claims_for_tx
        end

        sig { params(other: T.untyped).returns(T::Boolean) }
        def ==(other)
          return false unless other.is_a? self.class
          return false unless @ticket == other.ticket
          return false unless @subject == other.subject
          return false unless @auth_time == other.auth_time
          return false unless @acr == other.acr
          return false unless @claims == other.claims
          return false unless @properties == other.properties
          return false unless @scopes == other.scopes
          return false unless @sub == other.sub
          return false unless @idt_header_params == other.idt_header_params
          return false unless @claims_for_tx == other.claims_for_tx
          return false unless @consented_claims == other.consented_claims
          return false unless @authorization_details == other.authorization_details
          return false unless @jwt_at_claims == other.jwt_at_claims
          return false unless @access_token == other.access_token
          return false unless @access_token_duration == other.access_token_duration
          return false unless @session_id == other.session_id
          return false unless @id_token_aud_type == other.id_token_aud_type
          return false unless @verified_claims_for_tx == other.verified_claims_for_tx
          true
        end
      end
    end
  end
end
